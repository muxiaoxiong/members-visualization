import{i as j}from"./chunks/index.BiBfcChI.js";import{_ as N,p as i,v as L,P as $,c as _,o as d,e as A,j as a,t as w,b as y,G as v,a as u}from"./chunks/framework.Mlx6MwMA.js";const E={class:"wrapper"},I={key:0,class:"loading"},z={key:1,class:"error"},J={__name:"ProjectBaseChart",props:{extraConfig:{type:Object,required:!0},loadChartData:{type:Function,required:!0}},setup(h){const n=h;let t=null;const l=i(null),r=i(null),e=i(!1),c=i(null),g=i(!1),S=()=>{typeof window<"u"&&(g.value=document.documentElement.classList.contains("dark"))},P=()=>g.value?"dark":"light",C=async o=>{const s=[];return o.forEach(m=>{const f=Object.keys(m.monthly_total_stars).map(b=>m.monthly_total_stars[b]||0);f.some((b,p)=>p>0&&b===0&&f[p-1]!==0)||s.push({name:m.name,type:"line",smooth:!0,endLabel:{show:!0,formatter:b=>{const p=b.seriesName;return p.length>10?p.substring(0,10)+"...":p},distance:20},data:f,source:m})}),{seriesList:s}},k=async o=>{const{seriesList:s}=await C(o);return{tooltip:{trigger:"item"},legend:{type:"scroll",orient:"horizontal",data:o.map(f=>f.name),left:0,top:30},grid:{left:0,right:150,bottom:30,top:100,containLabel:!0},toolbox:{feature:{saveAsImage:{}}},xAxis:{type:"category",boundaryGap:!1,data:Object.keys(o[0].monthly_total_stars)},yAxis:{type:"value"},series:s,...n.extraConfig}},T=async()=>{try{e.value=!0,c.value=null,r.value=await n.loadChartData();const o=await k(r.value);t=j(l.value,P()),t.setOption(o)}catch(o){c.value=o.message}finally{e.value=!1}},O=async o=>{t.dispose();const s=await k(r.value);t=j(l.value,P()),t.setOption(s)},D=()=>{typeof window<"u"&&new MutationObserver(()=>{const s=document.documentElement.classList.contains("dark");s!==g.value&&(g.value=s,O())}).observe(document.documentElement,{attributes:!0,attributeFilter:["class"]})};return L(async()=>{S(),D(),await $(),await T()}),(o,s)=>(d(),_("div",E,[e.value?(d(),_("div",I,[...s[0]||(s[0]=[a("p",null,"正在加载数据...",-1)])])):c.value?(d(),_("div",z,[a("p",null,"加载数据时出错: "+w(c.value),1)])):A("",!0),a("div",{ref_key:"chartRef",ref:l,class:"chart"},null,512)]))}},x=N(J,[["__scopeId","data-v-b8525ce7"]]),B={__name:"ProjectStar",setup(h){const n=i({dataZoom:[{type:"slider",show:!0,yAxisIndex:[0],start:0,end:100}],grid:{left:0,right:150,bottom:30,top:100,containLabel:!0}}),t=async()=>{const r="/members-visualization/data/datawhalechina/organization_datasource.json".replace(/\/+/g,"/"),e=await fetch(r);if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);return(await e.json()).projectInfo};return(l,r)=>(d(),y(x,{"extra-config":n.value,"load-chart-data":t},null,8,["extra-config"]))}},H={__name:"ProjectStarAddTop5",setup(h){const n=i({grid:{left:0,right:100,bottom:30,top:100,containLabel:!0}}),t=async()=>{const r="/members-visualization/data/datawhalechina/organization_datasource.json".replace(/\/+/g,"/"),e=await fetch(r);if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);return(await e.json()).projectAddTop5Info};return(l,r)=>(d(),y(x,{"extra-config":n.value,"load-chart-data":t},null,8,["extra-config"]))}},M={__name:"NewProjectStarAddTop3",setup(h){const n=i({grid:{left:0,right:100,bottom:30,top:100,containLabel:!0}}),t=async()=>{const r="/members-visualization/data/datawhalechina/organization_datasource.json".replace(/\/+/g,"/"),e=await fetch(r);if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);return(await e.json()).newProjectAddTop3Info};return(l,r)=>(d(),y(x,{"extra-config":n.value,"load-chart-data":t},null,8,["extra-config"]))}},q=JSON.parse('{"title":"👍🏻 组织项目统计","description":"","frontmatter":{},"headers":[],"relativePath":"projects.md","filePath":"projects.md","lastUpdated":1759147703000}'),V={name:"projects.md"},R=Object.assign(V,{setup(h){return(n,t)=>(d(),_("div",null,[t[0]||(t[0]=a("h1",{id:"👍🏻-组织项目统计",tabindex:"-1"},[u("👍🏻 组织项目统计 "),a("a",{class:"header-anchor",href:"#👍🏻-组织项目统计","aria-label":'Permalink to "👍🏻 组织项目统计"'},"​")],-1)),t[1]||(t[1]=a("h2",{id:"项目-star-数",tabindex:"-1"},[u("项目 Star 数 "),a("a",{class:"header-anchor",href:"#项目-star-数","aria-label":'Permalink to "项目 Star 数"'},"​")],-1)),t[2]||(t[2]=a("p",null,"以下是近一年 Datawhale 所有 Star 数大于 1000 的项目 Star 数的情况：",-1)),t[3]||(t[3]=a("p",null,"注：拖动右侧滚动条可以对图表进行缩放。",-1)),v(B),t[4]||(t[4]=a("h2",{id:"项目本年度-star-增长数-top5",tabindex:"-1"},[u("项目本年度 Star 增长数 Top5 "),a("a",{class:"header-anchor",href:"#项目本年度-star-增长数-top5","aria-label":'Permalink to "项目本年度 Star 增长数 Top5"'},"​")],-1)),t[5]||(t[5]=a("p",null,"以下是近一年 Datawhale 所有 Star 数大于 1000 的项目 Star 增长数前 5 名：",-1)),v(H),t[6]||(t[6]=a("h2",{id:"本季度新项目-star-增长数-top3",tabindex:"-1"},[u("本季度新项目 Star 增长数 Top3 "),a("a",{class:"header-anchor",href:"#本季度新项目-star-增长数-top3","aria-label":'Permalink to "本季度新项目 Star 增长数 Top3"'},"​")],-1)),t[7]||(t[7]=a("p",null,"以下是近三个月 Datawhale 所有新增项目中 Star 增长数前 3 名：",-1)),v(M),t[8]||(t[8]=a("h2",{id:"数据更新",tabindex:"-1"},[u("数据更新 "),a("a",{class:"header-anchor",href:"#数据更新","aria-label":'Permalink to "数据更新"'},"​")],-1)),t[9]||(t[9]=a("p",null,"数据文件会通过 GitHub Actions 自动更新：",-1)),t[10]||(t[10]=a("ol",null,[a("li",null,"每月自动运行数据收集脚本"),a("li",null,[u("数据直接保存到 "),a("code",null,"docs/public/data/"),u(" 目录供前端使用")])],-1)),a("p",null,[a("em",null,"数据最后更新时间："+w(new Date().getFullYear())+" 年 "+w(new Date().getMonth()+1)+" 月 1 日",1)])]))}});export{q as __pageData,R as default};
